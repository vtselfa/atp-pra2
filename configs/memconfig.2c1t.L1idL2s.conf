[ General ]
Frequency= 3200

#
# SECCIÓN CacheGeometry: Describe la geometría de cache "dl1" con 8 KB, 4 vías por conjunto, tamaño de bloque 64 y latencia 1.
#
[ CacheGeometry dl1 ]
# PARÁMETRO Sets: Define el número de conjuntos de la cache. Nota que el tamaño de la cache se calcula con la fórmula: Tam_cache = Conjuntos * Vías * tam_bloque.
Sets = 32
# PARÁMETRO Assoc: Asociatividad o número de vías de la cache.
Assoc = 4
# PARÁMETRO Blocksize: Tamaño de bloque en bytes.
BlockSize = 64
# PARÁMETRO Latency: Latencia en caso de acierto. Para las caches de nivel 1 suele ser 1 o 2 ciclos.
Latency = 1
Ports = 4
MSHR = 16
EnablePrefetcher = False

# Geometría "il1" con 8 KB, 4 vías por conjunto, tamaño de bloque 64 y latencia 1.
[ CacheGeometry il1 ]
Sets = 32
Assoc = 4
BlockSize = 64
Latency = 1
Ports = 4
MSHR = 16
EnablePrefetcher = True
PrefetcherType = OBL

# Geometría "l2" con 256KB, 8 vías por conjunto, tamaño de bloque 64 y latencia 6. 
[ CacheGeometry l2 ]
Sets = 512
Assoc = 8
BlockSize = 64
Latency = 6
Ports = 4
MSHR = 16


#
# Level 1 Caches
#

#
# SECCIÓN Module: Describe una estructura de memoria (módulo) con determinado tipo (cache o memoria principal) y geometría.
# El nombre del módulo en este caso es "dl1-0".
# Además, incluye la conexión a la red de interconexión y los módulos situados en el nivel inmediatamente inferior de la jerarquía de memoria.
#
[ Module dl1-0 ]
# PARÁMETRO Type: Cache o MainMemory
Type = Cache
# PARÁMETRO Geometry: El nombre de alguna de las geometrías configuradas previamente.
Geometry = dl1
# PARÁMETRO LowNetwork: El nombre de la red de interconexión que conecta este módulo con el nivel inferior de la jerarquía (L2 en este caso).
# NOTA: Las redes de interconexión se describen en secciones posteriores en este fichero.
LowNetwork = net-1
# PARÁMETRO LowModules: El nombre del módulo en el nivel inferior de la jerarquía encargado de servirle los fallos a este módulo. Pueden ser varios.
LowModules = l2-0

[ Module il1-0 ]
Type = Cache
Geometry = il1
LowNetwork = net-1
LowModules = l2-0

[ Module dl1-1 ]
Type = Cache
Geometry = dl1
LowNetwork = net-1
LowModules = l2-0

[ Module il1-1 ]
Type = Cache
Geometry = il1
LowNetwork = net-1
LowModules = l2-0


#
# Level 2 Caches
#

#
# NOTA: Para las caches de nivel 2 y niveles inferiores hay que incluir el parámetro HighNetwork que las conecta con el nivel inmediatamente superior.
#
[ Module l2-0 ]
Type = Cache
Geometry = l2
# PARÁMETRO HighNetwork: El nombre de la red de interconexión que conecta este módulo con el nivel superior de la jerarquía (L1 en este caso).
HighNetwork = net-1
LowNetwork = net-2
LowModules = mod-mm-0


#
# Main memory
#

#
# NOTA: Los módulos que representan la memoria principal son "especiales". No tienen LowNetwork ni Geometry y al contrario que en las caches,
# su latencia y tamaño de bloque viene definida en la misma sección Module.
#
[ Module mod-mm-0 ]
Type = MainMemory
HighNetwork = net-2
BlockSize = 64
Latency = 100
DirectorySize = 262144
DirectoryAssoc = 32


#
# Nodes
#

#
# SECCIÓN Entry: Define una "entrada" en la jerarquía de memoria. Representa el punto de acceso de un núcleo.
#
[ Entry thread-0 ]
# PARÁMETROS InstModule y DataModule: Estructuras de memoria (módulos) de nivel 1 para instrucciones y datos usados por este núcleo.
InstModule = il1-0
DataModule = dl1-0
Arch = x86
Core = 0
Thread = 0

[ Entry thread-1 ]
Arch = x86
Core = 1
Thread = 0
InstModule = il1-1
DataModule = dl1-1


#
# Interconnects
#

#
# SECCIÓN Network: Representa una red de interconexión formada por un switch que conecta módulos en la jerarquía.
#
[ Network net-1 ]
# PARÁMETRO DefaultBandwidth: Ancho de banda del switch y sus enlaces en bytes por ciclo.
DefaultBandWidth = 128
# PARÁMETRO DefaultInputBufferSize: Tamaño de los buffers de entrada del switch y los módulos conectados a este.
DefaultInputBufferSize = 512
# PARÁMETRO DefaultOutputBufferSize: Tamaño de los buffers de salida del switch y los módulos conectados a este.
DefaultOutputBufferSize = 512

[ Network net-2 ]
DefaultBandWidth = 128
DefaultInputBufferSize = 512
DefaultOutputBufferSize = 512
